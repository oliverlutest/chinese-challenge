<!DOCTYPE html>
<html>
<body>
    <h2>CSV to JSON Converter</h2>
    <input type="file" id="csvFile" accept=".csv">
    <br><br>
    <button onclick="convert()">Convert & Download data.json</button>

    <script>
        function convert() {
            const fileInput = document.getElementById('csvFile');
            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const text = e.target.result;
                const lines = text.split('\n');
                const result = [];

                // Starting from i=1 to skip the header row
                for (let i = 1; i < lines.length; i++) {
                    const currentline = lines[i].split(',');
                    if (currentline.length >= 3) {
                        result.push({
                            "w": currentline[0].trim(),
                            "p": currentline[1].trim(),
                            "e": currentline[2].trim()
                        });
                    }
                }

                const jsonString = JSON.stringify(result, null, 2);
                const blob = new Blob([jsonString], {type: "application/json"});
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = "data.json";
                a.click();
            };
            reader.readAsText(file);
        }
    </script>
</body>
</html>